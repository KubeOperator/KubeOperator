#!/bin/bash

OLD_PROJECT=operator
OLD_ADDRESS=registry.kubeops.io:8092/registry.fit2cloud.com
NEW_ADDRESS={{ MASTER_IP }}:30003
NEW_PROJECT={{ REGISTRY_PROJECT_NAME }}

IMAGES=(
prometheus:v2.9.2
prometheus-operator:v0.28.0
configmap-reload:v0.0.1
prometheus-config-reloader:v0.28.0
kube-state-metrics:v1.5.0
kube-rbac-proxy:v0.4.1
addon-resizer-amd64:2.1
)

for image in ${IMAGES[@]}
do
    docker tag ${OLD_ADDRESS}/${OLD_PROJECT}/${image} ${NEW_ADDRESS}/${NEW_PROJECT}/${image}
    docker push ${NEW_ADDRESS}/${NEW_PROJECT}/${image}
    docker rmi ${OLD_ADDRESS}/${OLD_PROJECT}/${image}
done